// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F={}.hasOwnProperty,I=function(e,t){function r(){this.constructor=e}for(var n in t)F.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e},q=function(e,t){return function(){return e.apply(t,arguments)}};b="https://docs.google.com/spreadsheet/pub?key=0AuGqzqpyR-eVdF8tbWUxMFhhMTRjYzBtSHJLVEswU1E&output=html";u=function(e){function t(){w=t.__super__.constructor.apply(this,arguments);return w}I(t,e);return t}(Backbone.Marionette.Application);y=new u;y.addInitializer(function(){var e;e=new f;return Backbone.history.start({root:"/Backbone/index.html"})});f=function(e){function t(){this.buildLayout=q(this.buildLayout,this);E=t.__super__.constructor.apply(this,arguments);return E}I(t,e);t.prototype.routes={"":"showHome","rules/":"showChallenges"};t.prototype.initialize=function(){this.data=new s;return this.firstLoad=!0};t.prototype.loadGo=function(e){var t,n=this;if(!this.data.get("challenges")){this.listenTo(this.data,"sync",this.buildLayout);this.data.fetch()}if(this.firstLoad){t=400;this.firstLoad=!1}else t=0;return setTimeout(function(){switch(e){case"home":return n.mainLayout.showHome();case"rules":return n.mainLayout.showChallenges()}},t)};t.prototype.buildLayout=function(){this.mainLayout=new a({el:"#main-content",router:this,data:this.data});return this.mainLayout.render()};t.prototype.showHome=function(){return this.loadGo("home")};t.prototype.showChallenges=function(){return this.loadGo("rules")};return t}(Backbone.Router);s=function(e){function t(){O=t.__super__.constructor.apply(this,arguments);return O}I(t,e);t.prototype.url="js/ho.json";return t}(Backbone.Model);a=function(e){function n(){M=n.__super__.constructor.apply(this,arguments);return M}I(n,e);n.prototype.template="#main-layout";n.prototype.regions={nav:".nav-content",content:".content"};n.prototype.initialize=function(e){this.router=e.router,this.data=e.data;return this.navView=new l({router:this.router})};n.prototype.onRender=function(e){return this.nav.show(this.navView)};n.prototype.showHome=function(){return this.content.show(new o({data:this.data}))};n.prototype.showChallenges=function(){return this.content.show(new t({data:this.data}))};return n}(Backbone.Marionette.Layout);o=function(e){function t(){_=t.__super__.constructor.apply(this,arguments);return _}I(t,e);t.prototype.template="#home-page";t.prototype.regions={welcome:".welcome-container",format:".format-container",schedule:".schedule-container"};t.prototype.initialize=function(e){this.data=e.data;this.scheduleData=new Backbone.Collection(this.data.get("schedule"));this.eventData=new Backbone.Model(this.data.get("event_info")[0]);this.scheduleView=new v({model:this.scheduleData,view:d});return this.eventInfoView=new i({model:this.eventData,view:r})};t.prototype.onShow=function(){this.schedule.show(this.scheduleView);return this.format.show(this.eventInfoView)};return t}(Backbone.Marionette.Layout);m=function(e){function t(){D=t.__super__.constructor.apply(this,arguments);return D}I(t,e);t.prototype.regions={content:".content"};t.prototype.initialize=function(e){return this.model=e.model,this.view=e.view,e};t.prototype.onShow=function(){return this.renderView()};t.prototype.renderView=function(){this.myview=new this.view({collection:this.model});return this.content.show(this.myview)};return t}(Backbone.Marionette.Layout);g=function(e){function t(){P=t.__super__.constructor.apply(this,arguments);return P}I(t,e);t.prototype.regions={content:".content"};t.prototype.initialize=function(e){return this.model=e.model,this.view=e.view,e};t.prototype.onShow=function(){return this.renderView()};t.prototype.renderView=function(){this.myview=new this.view({model:this.model});return this.content.show(this.myview)};return t}(Backbone.Marionette.Layout);v=function(e){function t(){H=t.__super__.constructor.apply(this,arguments);return H}I(t,e);t.prototype.template="#sub-view";return t}(m);i=function(e){function t(){B=t.__super__.constructor.apply(this,arguments);return B}I(t,e);t.prototype.template="#sub-view";return t}(g);t=function(e){function t(){j=t.__super__.constructor.apply(this,arguments);return j}I(t,e);t.prototype.template="#challenges-page";t.prototype.regions={rules:".rules-container",challenges:".challenges-container"};t.prototype.initialize=function(e){this.data=e.data;this.rulesData=new Backbone.Collection(this.data.get("rules"));this.challengesData=new Backbone.Collection(this.data.get("challenges"));this.rulesView=new h({collection:this.rulesData});return this.challengesView=new n({collection:this.challengesData})};t.prototype.onShow=function(){this.rules.show(this.rulesView);return this.challenges.show(this.challengesView)};return t}(Backbone.Marionette.Layout);e=function(e){function t(){S=t.__super__.constructor.apply(this,arguments);return S}I(t,e);t.prototype.template="#challenge-item";return t}(Backbone.Marionette.ItemView);n=function(t){function n(){x=n.__super__.constructor.apply(this,arguments);return x}I(n,t);n.prototype.itemView=e;n.prototype.className="challenges";return n}(Backbone.Marionette.CollectionView);c=function(e){function t(){T=t.__super__.constructor.apply(this,arguments);return T}I(t,e);t.prototype.template="#rules-item";return t}(Backbone.Marionette.ItemView);h=function(e){function t(){N=t.__super__.constructor.apply(this,arguments);return N}I(t,e);t.prototype.itemView=c;t.prototype.className="rules";return t}(Backbone.Marionette.CollectionView);p=function(e){function t(){C=t.__super__.constructor.apply(this,arguments);return C}I(t,e);t.prototype.template="#schedule-item";return t}(Backbone.Marionette.ItemView);d=function(e){function t(){k=t.__super__.constructor.apply(this,arguments);return k}I(t,e);t.prototype.itemView=p;t.prototype.className="schedule";return t}(Backbone.Marionette.CollectionView);r=function(e){function t(){L=t.__super__.constructor.apply(this,arguments);return L}I(t,e);t.prototype.template="#format-info";t.prototype.className="info";return t}(Backbone.Marionette.ItemView);l=function(e){function t(){A=t.__super__.constructor.apply(this,arguments);return A}I(t,e);t.prototype.template="#navbar";t.prototype.events={"click a":"goToPage"};t.prototype.initialize=function(e){this.router=e.router;return this.delegateEvents()};t.prototype.goToPage=function(e){var t;t=this.$(e.currentTarget).data("slug");if(t!=="leaderboard"){e.preventDefault();e.stopPropagation();this.$("li").removeClass("active");this.$(e.currentTarget).parent("li").addClass("active");return t==="home"?this.router.navigate("",{trigger:!0,replace:!0}):this.router.navigate(""+t+"/",{trigger:!0,replace:!0})}};return t}(Backbone.Marionette.ItemView);$(document).ready(function(){return y.start()})}).call(this);